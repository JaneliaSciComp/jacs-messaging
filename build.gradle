group 'org.hhmi.janelia'
version '1.0'

apply plugin: 'groovy'
apply plugin: 'java'
apply plugin: 'maven-publish'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
    maven {
        url "http://maven.int.janelia.org/nexus/content/groups/public/"
    }
}

task brokerJar(type: Jar) {
    manifest {
        attributes 'Implementation-Title': 'Shared Workspace Broker',
                'Implementation-Version': version,
                'Main-Class': 'org.janelia.messaging.broker.sharedworkspace.NeuronBroker'
    }
    baseName = 'sharedWorkspaceBroker'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}


task neuronGenerationJar(type: Jar) {
    manifest {
        attributes 'Implementation-Title': 'Neuron Generation Bot',
                'Implementation-Version': version,
                'Main-Class': 'org.janelia.messaging.utility.bot.neurongenerator.NeuronGenerationBot'
    }
    baseName = 'NeuronGenerationBot'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}

dependencies {
    testCompile(
            'junit:junit:4.12',
            'org.codehaus.groovy:groovy-all:2.3.11',
            'org.spockframework:spock-core:1.0-groovy-2.3',
            'cglib:cglib-nodep:2.2',
            'org.objenesis:objenesis:1.2'
    )
    compile group: 'org.janelia', name: 'jacs-model', version: '1.0'
    compile group: 'com.rabbitmq', name: 'amqp-client', version: '5.0.0'
    compile group: 'commons-cli', name: 'commons-cli', version: '1.4'
    compile group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-base', version: '2.5.4'
    compile group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-json-provider', version: '2.5.4'
    compile group: 'org.glassfish.jersey.core', name: 'jersey-client', version: '2.6'
    compile group: 'org.glassfish.jersey.media', name: 'jersey-media-multipart', version: '2.6'
    compile group: 'javax.ws.rs', name: 'javax.ws.rs-api', version: '2.1'
    compile group: 'com.sun.media', name: 'jai-codec', version: '1.1.3'
    compile group: 'javax.media', name: 'jai-core', version: '1.1.3'


}


artifacts {
    archives brokerJar
    archives neuronGenerationJar
}
